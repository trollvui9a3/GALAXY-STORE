<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vòng Quay May Mắn</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; text-align: center; padding: 20px; }
  #wheel { margin: 40px auto; width: 300px; height: 300px; border-radius: 50%; border: 10px solid #333; position: relative; overflow: hidden; }
  .segment { width: 50%; height: 50%; position: absolute; top: 50%; left: 50%; transform-origin: 0% 0%; }
  #pointer { width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-bottom: 30px solid red; margin: 0 auto; }
  button { padding: 10px 20px; font-size: 16px; margin-top: 20px; cursor: pointer; }
  #result { margin-top: 20px; font-size: 20px; font-weight: bold; color: green; }
  input { padding: 8px; font-size: 16px; width: 200px; margin-top: 20px; }
</style>
</head>
<body>

<h1>Vòng Quay May Mắn</h1>
<div id="wheel"></div>
<div id="pointer"></div>
<input type="text" id="codeInput" placeholder="Nhập code">
<br>
<button id="spinBtn">Quay Ngay</button>
<div id="result"></div>
<div>Lượt quay còn lại: <span id="spinCount"></span></div>

<script>
const prizes = ["1 triệu", "Xe SH", "Samsung Galaxy S24 Plus"];
let spins = localStorage.getItem('spins') || 10;
document.getElementById('spinCount').innerText = spins;

function spinWheel() {
    const code = document.getElementById('codeInput').value.trim();
    if(!code) { alert("Vui lòng nhập code!"); return; }
    if(spins <= 0) { alert("Bạn đã hết lượt quay!"); return; }

    // Giảm lượt quay
    spins--;
    localStorage.setItem('spins', spins);
    document.getElementById('spinCount').innerText = spins;

    // Chọn ngẫu nhiên phần thưởng
    const prize = prizes[Math.floor(Math.random() * prizes.length)];
    document.getElementById('result').innerText = "Bạn trúng: " + prize;

    // Xoay vòng quay (hình minh họa, xoay bằng CSS)
    const wheel = document.getElementById('wheel');
    const angle = 360 * 5 + Math.floor(Math.random() * 360);
    wheel.style.transition = "transform 4s ease-out";
    wheel.style.transform = `rotate(${angle}deg)`;
}

document.getElementById('spinBtn').addEventListener('click', spinWheel);

// Vẽ vòng quay 3 phần thưởng
const wheelDiv = document.getElementById('wheel');
prizes.forEach((p, i) => {
    const seg = document.createElement('div');
    seg.className = 'segment';
    seg.style.transform = `rotate(${i * (360/prizes.length)}deg)`;
    seg.style.background = i % 2 === 0 ? '#FFD700' : '#FFA500';
    seg.innerHTML = `<p style="position:absolute;top:10px;left:10px;transform:rotate(${-i * (360/prizes.length)}deg);font-weight:bold;">${p}</p>`;
    wheelDiv.appendChild(seg);
});
</script>

</body>
</html>
